<%- include('partials/head.ejs') %>
    <title><%= title %> | Book repository</title>
</head>
<body>
    <%- include('partials/sidebar.ejs') %>

    <h1><%= title %>: <%= author.name %></h1>
    <p><%= author.lifespan %></p>

    <% if (author_books.length > 0) { %>
        <p><strong>Delete the following books before attempting to delete this author.</strong></p>    

    <div style='margin-left:20px;margin-top:20px'>

        <h4>Books</h4>     
        <dl>
        <% for( let i = 0; i < author_books.length; i++ ) { %>
            <dt>
                <a href="<%= author_books[i].url %>"><%= author_books[i].title %></a>
            </dt>
            <dd>
                <%= author_books[i].summary %>
            </dd>                
        <% } %>
        </dl>

    <% } else { %>

        <p>Do you really want to delete this Author?</p>
        <form action="" method="post">
            <div class="form-group">
                <input id="authorid" class="form-control" type="hidden" name="authorid" required value="<%= author._id %>">
            </div>
            <button class="btn btn-primary" type="submit">Delete</button>
        </form>
    </div>
    <% } %>

<%- include('partials/footer.ejs') %>